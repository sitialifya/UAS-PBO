<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Penjualan Roti</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <style>
        /* Gaya untuk ikon keranjang */
        #cart-icon {
            position: fixed;
            top: 20px;
            right: 20px;
            cursor: pointer;
            font-size: 24px;
            color: #C06C84;
        }

        /* Gaya untuk modal */
        .modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 20px;
            border: 1px solid #ddd;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .modal h2 {
            margin-top: 0;
        }

        .modal button {
            margin-top: 10px;
        }

        /* Gaya untuk overlay */
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
        }
    </style>
</head>
<body>
    <header>
        <h1>Toko Roti Aroma Bahagia</h1>
        <p>Selamat Datang di Toko Roti Kami!<br>
        Kami menjual berbagai macam roti segar dan lezat.</p>
    </header>
<div id="cart-icon" style="display: none;">
    &#128722; <!-- Simbol keranjang belanja -->
</div>
    <!-- Login Section -->
    <section id="login-section">
        <h2>Login</h2>
        <form id="login-form">
            <label for="username">Username:</label>
            <input type="text" id="username" required><br>
            <label for="password">Password:</label>
            <input type="password" id="password" required><br>
            <button type="submit">Login</button>
        </form>
    </section>

    <section id="produk" style="display: none;">
        <h2>Produk Kami</h2>
        <div class="produk">
            <div class="item">
                <img src="spicyfloss.jpeg" alt="Spicy Floss">
                <h3>Spicy Floss</h3>
                <p>Rp12.500</p>
                <button class="add-to-cart" data-name="Spicy Floss" data-price="12500" aria-label="Tambah Spicy Floss ke keranjang">
                    Tambah ke Keranjang
                </button>
            </div>
            <!-- Produk lainnya -->
        </div>
    </section>

    <section id="keranjang" style="display: none;">
        <h2>Keranjang Belanja</h2>
        <ul id="cart-items">
            <!-- Daftar produk yang ditambahkan ke keranjang akan muncul di sini -->
        </ul>
        <p>Total: Rp <span id="total">0</span></p>
    </section>

    <footer>
        <h2>Kontak Kami</h2>
        <p>Email: <a href="mailto:tokorotiAromaBahagia@example.com">tokorotiAromaBahagia@example.com</a></p>
        <p>Telepon: +62 812 3456 7890</p>
    </footer>

    <!-- In the payment modal, add a "Pay Now" button before showing the payment options -->
<div id="payment-modal" class="modal">
    <h2>Detail Belanja</h2>
    <ul id="payment-items"></ul>
    <p>Total: Rp <span id="payment-total"></span></p>
    <button id="pay-now">Bayar Sekarang</button> <!-- New Pay Now button -->
    <button id="close-payment">Kembali</button>
</div>
    
    <div id="payment-modal" class="modal">
        <h2>Metode Pembayaran</h2>
        <ul id="payment-items"></ul>
        <p>Total: Rp <span id="payment-total"></span></p>
        <button id="e-wallet">E-Wallet</button>
        <button id="bank-transfer">Transfer Bank</button>
        <button id="cod">COD</button>
        <button id="close-payment">Kembali</button>
    </div>

    <div id="receipt-modal" class="modal">
        <h2>Struk Pembelian</h2>
        <ul id="receipt-items"></ul>
        <p>Total Pembayaran: Rp <span id="final-total"></span></p>
        <button id="close-receipt">Kembali</button>
    </div>

    <script src="app.js"></script>
    <script>
        // Login functionality
        document.getElementById('login-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            if (username === "admin" && password === "1234") {
                alert("Login berhasil!");
                document.getElementById('login-section').style.display = 'none';
                document.getElementById('produk').style.display = 'block';
                document.getElementById('keranjang').style.display = 'block';
                document.getElementById('cart-icon').style.display = 'block';
            } else {
                alert("Username atau password salah!");
            }
        });
    // Show payment modal when cart icon is clicked
    document.getElementById('cart-icon').addEventListener('click', function() {
        const cartItems = document.getElementById('cart-items').innerHTML;
        const total = document.getElementById('total').textContent;

        if (cartItems.trim() === "") {
            alert("Keranjang belanja kosong!");
            return;
        }

        document.getElementById('payment-items').innerHTML = cartItems;
        document.getElementById('payment-total').textContent = total;
        document.getElementById('payment-modal').style.display = 'block';
    });

    // Handle "Pay Now" button click
    document.getElementById('pay-now').addEventListener('click', function() {
        // Hide the payment details and show the payment method selection
        document.getElementById('payment-modal').innerHTML = `
            <h2>Metode Pembayaran</h2>
            <ul id="payment-items"></ul>
            <p>Total: Rp <span id="payment-total"></span></p>
            <button id="e-wallet">E-Wallet</button>
            <button id="bank-transfer">Transfer Bank</button>
            <button id="cod">COD</button>
            <button id="close-payment">Kembali</button>
        `;
        // Re-assign cart items and total to the new modal
        document.getElementById('payment-items').innerHTML = document.getElementById('cart-items').innerHTML;
        document.getElementById('payment-total').textContent = document.getElementById('total').textContent;

        // Show payment method buttons
        document.getElementById('payment-modal').style.display = 'block';
    });

    // Handle payment method selection
    document.getElementById('e-wallet').addEventListener('click', function() {
        alert("Pembayaran berhasil melalui E-Wallet, Roti akan dikirim.");
        document.getElementById('payment-modal').style.display = 'none';
    });

    document.getElementById('bank-transfer').addEventListener('click', function() {
        alert("Pembayaran berhasil melalui Transfer Bank, Roti akan dikirim.");
        document.getElementById('payment-modal').style.display = 'none';
    });

    document.getElementById('cod').addEventListener('click', function() {
        alert("Pembayaran berhasil melalui COD, Roti akan dikirim.");
        document.getElementById('payment-modal').style.display = 'none';
    });

    // Close payment modal
    document.getElementById('close-payment').addEventListener('click', function() {
        document.getElementById('payment-modal').style.display = 'none';
    });

    // Close receipt modal
    document.getElementById('close-receipt').addEventListener('click', function() {
        document.getElementById('receipt-modal').style.display = 'none';
    });

    // Function to add product to the cart
    document.querySelectorAll('.add-to-cart').forEach(button => {
        button.addEventListener('click', function() {
            const itemName = this.getAttribute('data-name');
            const itemPrice = parseInt(this.getAttribute('data-price'));

            const cartItems = document.getElementById('cart-items');
            const totalElement = document.getElementById('total');
            let total = parseInt(totalElement.textContent);

            // Add product to cart list
            const listItem = document.createElement('li');
            listItem.textContent = `${itemName} - Rp${itemPrice.toLocaleString('id-ID')}`;
            cartItems.appendChild(listItem);

            // Update total price
            total += itemPrice;
            totalElement.textContent = total.toLocaleString('id-ID');
        });
    });
</script>
</body>
</html>
